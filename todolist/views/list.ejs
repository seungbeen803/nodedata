<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">   
    <!-- w3schools.com에 있는 bootstrap4 방식 사용함. -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css">
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js"></script>
  <title>List Page</title>
</head>
<body>
  <h1>간단한 ToDo 리스트 </h1>
  <a href="/insert">
    <button type="button" class="btn btn-primary">추가</button>
  </a>
  <hr />
  <table width="90%" border="1">
    <tr>      
      <th>ID</th>
      <th>내용 할일</th>
      <th>완료여부</th>
      <th>완료처리</th>
      <th>삭제</th>
    </tr>
    <!-- for 반복문 4가지 제시함. 방법1 ~ 4중에 하나 골라서 사용할 것 -->
    <!-- 방법1 foreach 문 사용 -->
    <% datalist.forEach(function (item, index) { %>
    <tr>
      <td><%= item.id %></td>
      <td><%= item.contents %></td>
      <td><%= item.yesno %></td>
      <td>
        <% if (item.yesno == 'yes') {%>
            <button type="button" class="btn btn-light">변경</button>    
        <% } else { %>
            <a href="/edit/<%= item.id %>">
            <button type="button" class="btn btn-success">완료</button>
            </a>    
        <%}%>
      <td><a href="/delete/<%= item.id %>">
        <button type="button" class="btn btn-danger">삭제</button>
        </a></td>
    </tr>
    <% }); %>
    
    <!-- 방법2 for of 문 사용 -->
    <!-- 
    <% for (let item of datalist) { %>
      <tr>
        <td><%= item.id %></td>
        <td><%= item.contents %></td>
        <td><%= item.yesno %></td>
        <td>
          <% if (item.yesno == 'yes') {%>
              <button type="button" class="btn btn-light">변경</button>    
          <% } else { %>
              <a href="/edit/<%= item.id %>">
              <button type="button" class="btn btn-success">완료</button>
              </a>    
          <%}%>
        <td><a href="/delete/<%= item.id %>">
          <button type="button" class="btn btn-danger">삭제</button>
          </a></td>
      </tr>
    <% }; %>
    -->
    <!-- 방법3 for 문 사용 -->
    <!-- 
    <% for (let i =0; i < datalist.length; i++) { %>
      <tr>
        <td><%= datalist[i].id %></td>
        <td><%= datalist[i].contents %></td>
        <td><%= datalist[i].yesno %></td>
        <td>
          <% if (datalist[i].yesno == 'yes') {%>
              <button type="button" class="btn btn-light">변경</button>    
          <% } else { %>
              <a href="/edit/<%= datalist[i].id %>">
              <button type="button" class="btn btn-success">완료</button>
              </a>    
          <%}%>
        <td><a href="/delete/<%= datalist[i].id %>">
          <button type="button" class="btn btn-danger">삭제</button>
          </a></td>
      </tr>
      <% }; %>
    -->
    <!-- 방법4 for in 문 사용 -->
    <!-- 
    <% for (let index in datalist) { %>
      <tr>
        <td><%= datalist[index].id %></td>
        <td><%= datalist[index].contents %></td>
        <td><%= datalist[index].yesno %></td>
        <td>
          <% if (datalist[index].yesno == 'yes') {%>
              <button type="button" class="btn btn-light">변경</button>    
          <% } else { %>
              <a href="/edit/<%= datalist[index].id %>">
              <button type="button" class="btn btn-success">완료</button>
              </a>    
          <%}%>
        <td><a href="/delete/<%= datalist[index].id %>">
          <button type="button" class="btn btn-danger">삭제</button>
          </a></td>
      </tr>
      <% }; %>
    -->
  </table>
</body>
</html>